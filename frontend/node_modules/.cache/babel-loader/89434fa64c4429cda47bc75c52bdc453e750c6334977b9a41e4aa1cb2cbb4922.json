{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useParams}from'react-router-dom';import axios from'axios';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const EditInvoice=()=>{const{id}=useParams();const[invoice,setInvoice]=useState({quoteId:'',clientId:'',// Added clientId field\namountDue:'',dueDate:'',status:''});const[quotes,setQuotes]=useState([]);const[clients,setClients]=useState([]);// State for clients\nuseEffect(()=>{const fetchInvoice=async()=>{const response=await axios.get(`http://localhost:4000/api/invoices/${id}`);setInvoice(response.data);};fetchInvoice();},[id]);useEffect(()=>{const fetchQuotes=async()=>{const response=await axios.get('http://localhost:4000/api/quotes');setQuotes(response.data);};fetchQuotes();},[]);useEffect(()=>{const fetchClients=async()=>{const response=await axios.get('http://localhost:4000/api/clients');setClients(response.data);};fetchClients();},[]);const handleChange=e=>{setInvoice({...invoice,[e.target.name]:e.target.value});};const handleSubmit=async e=>{e.preventDefault();try{await axios.put(`http://localhost:4000/api/invoices/${id}`,invoice);window.location.href='/invoices/view';}catch(error){console.error('Error updating invoice:',error);}};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Edit Invoice\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"label\",{children:[\"Quote:\",/*#__PURE__*/_jsxs(\"select\",{name:\"quoteId\",value:invoice.quoteId,onChange:handleChange,required:true,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select a quote\"}),quotes.map(quote=>/*#__PURE__*/_jsx(\"option\",{value:quote._id,children:quote.title},quote._id))]})]}),/*#__PURE__*/_jsxs(\"label\",{children:[\"Client:\",/*#__PURE__*/_jsxs(\"select\",{name:\"clientId\",value:invoice.clientId,onChange:handleChange,required:true,children:[\"  // Client selection box\",/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select a client\"}),clients.map(client=>/*#__PURE__*/_jsx(\"option\",{value:client._id,children:client.name},client._id))]})]}),/*#__PURE__*/_jsxs(\"label\",{children:[\"Amount Due:\",/*#__PURE__*/_jsx(\"input\",{type:\"number\",name:\"amountDue\",value:invoice.amountDue,onChange:handleChange,required:true})]}),/*#__PURE__*/_jsxs(\"label\",{children:[\"Due Date:\",/*#__PURE__*/_jsx(\"input\",{type:\"date\",name:\"dueDate\",value:invoice.dueDate.slice(0,10),onChange:handleChange,required:true})]}),/*#__PURE__*/_jsxs(\"label\",{children:[\"Status:\",/*#__PURE__*/_jsxs(\"select\",{name:\"status\",value:invoice.status,onChange:handleChange,required:true,children:[/*#__PURE__*/_jsx(\"option\",{value:\"Pending\",children:\"Pending\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Paid\",children:\"Paid\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Overdue\",children:\"Overdue\"})]})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Save Changes\"})]})]});};export default EditInvoice;","map":{"version":3,"names":["React","useState","useEffect","useParams","axios","jsx","_jsx","jsxs","_jsxs","EditInvoice","id","invoice","setInvoice","quoteId","clientId","amountDue","dueDate","status","quotes","setQuotes","clients","setClients","fetchInvoice","response","get","data","fetchQuotes","fetchClients","handleChange","e","target","name","value","handleSubmit","preventDefault","put","window","location","href","error","console","children","onSubmit","onChange","required","map","quote","_id","title","client","type","slice"],"sources":["C:/Users/antho/cs203/frontend/src/pages/EditInvoice.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useParams } from 'react-router-dom';\r\nimport axios from 'axios';\r\n\r\nconst EditInvoice = () => {\r\n  const { id } = useParams();\r\n  const [invoice, setInvoice] = useState({\r\n    quoteId: '',\r\n    clientId: '',  // Added clientId field\r\n    amountDue: '',\r\n    dueDate: '',\r\n    status: ''\r\n  });\r\n  const [quotes, setQuotes] = useState([]);\r\n  const [clients, setClients] = useState([]);  // State for clients\r\n\r\n  useEffect(() => {\r\n    const fetchInvoice = async () => {\r\n      const response = await axios.get(`http://localhost:4000/api/invoices/${id}`);\r\n      setInvoice(response.data);\r\n    };\r\n    fetchInvoice();\r\n  }, [id]);\r\n\r\n  useEffect(() => {\r\n    const fetchQuotes = async () => {\r\n      const response = await axios.get('http://localhost:4000/api/quotes');\r\n      setQuotes(response.data);\r\n    };\r\n    fetchQuotes();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    const fetchClients = async () => {\r\n      const response = await axios.get('http://localhost:4000/api/clients');\r\n      setClients(response.data);\r\n    };\r\n    fetchClients();\r\n  }, []);\r\n\r\n  const handleChange = (e) => {\r\n    setInvoice({\r\n      ...invoice,\r\n      [e.target.name]: e.target.value,\r\n    });\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    try {\r\n      await axios.put(`http://localhost:4000/api/invoices/${id}`, invoice);\r\n      window.location.href = '/invoices/view';\r\n    } catch (error) {\r\n      console.error('Error updating invoice:', error);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <h1>Edit Invoice</h1>\r\n      <form onSubmit={handleSubmit}>\r\n        <label>\r\n          Quote:\r\n          <select name=\"quoteId\" value={invoice.quoteId} onChange={handleChange} required>\r\n            <option value=\"\">Select a quote</option>\r\n            {quotes.map(quote => (\r\n              <option key={quote._id} value={quote._id}>{quote.title}</option>\r\n            ))}\r\n          </select>\r\n        </label>\r\n        <label>\r\n          Client:\r\n          <select name=\"clientId\" value={invoice.clientId} onChange={handleChange} required>  // Client selection box\r\n            <option value=\"\">Select a client</option>\r\n            {clients.map(client => (\r\n              <option key={client._id} value={client._id}>{client.name}</option>\r\n            ))}\r\n          </select>\r\n        </label>\r\n        <label>\r\n          Amount Due:\r\n          <input type=\"number\" name=\"amountDue\" value={invoice.amountDue} onChange={handleChange} required />\r\n        </label>\r\n        <label>\r\n          Due Date:\r\n          <input type=\"date\" name=\"dueDate\" value={invoice.dueDate.slice(0, 10)} onChange={handleChange} required />\r\n        </label>\r\n        <label>\r\n          Status:\r\n          <select name=\"status\" value={invoice.status} onChange={handleChange} required>\r\n            <option value=\"Pending\">Pending</option>\r\n            <option value=\"Paid\">Paid</option>\r\n            <option value=\"Overdue\">Overdue</option>\r\n          </select>\r\n        </label>\r\n        <button type=\"submit\">Save Changes</button>\r\n      </form>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default EditInvoice;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}