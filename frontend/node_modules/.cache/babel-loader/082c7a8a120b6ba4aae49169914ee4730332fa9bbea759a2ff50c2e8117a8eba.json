{"ast":null,"code":"import React,{useState,useEffect}from'react';import axios from'axios';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const ViewInvoices=()=>{const[invoices,setInvoices]=useState([]);const[quotes,setQuotes]=useState([]);const[clients,setClients]=useState([]);useEffect(()=>{const fetchInvoices=async()=>{try{const invoiceResponse=await axios.get('http://localhost:4000/api/invoices');const quoteResponse=await axios.get('http://localhost:4000/api/quotes');const clientResponse=await axios.get('http://localhost:4000/api/clients');setInvoices(invoiceResponse.data);setQuotes(quoteResponse.data);setClients(clientResponse.data);console.log('Fetched Invoices:',invoiceResponse.data);console.log('Fetched Quotes:',quoteResponse.data);console.log('Fetched Clients:',clientResponse.data);}catch(error){console.error('Error fetching data:',error);}};fetchInvoices();},[]);const getQuoteName=quoteId=>{const quote=quotes.find(q=>q._id===quoteId);return quote?quote.title:'Unknown';};const getClientName=clientId=>{const client=clients.find(c=>c._id===clientId);return client?client.name:'Unknown';};const deleteInvoice=async id=>{try{await axios.delete(`http://localhost:4000/api/invoices/${id}`);setInvoices(invoices.filter(invoice=>invoice._id!==id));}catch(error){console.error('Error deleting invoice:',error);}};const editInvoice=id=>{window.location.href=`/invoices/edit/${id}`;};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Existing Invoices\"}),/*#__PURE__*/_jsx(\"ul\",{children:invoices.map(invoice=>/*#__PURE__*/_jsxs(\"li\",{style:{marginBottom:'15px'},children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Invoice:\"}),\" \",getQuoteName(invoice.quoteId)]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Client:\"}),\" \",getClientName(invoice.clientId)]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Amount Due:\"}),\" \",invoice.amountDue]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Status:\"}),\" \",invoice.status]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Due Date:\"}),\" \",new Date(invoice.dueDate).toLocaleDateString()]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>editInvoice(invoice._id),children:\"Edit\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>deleteInvoice(invoice._id),children:\"Delete\"})]},invoice._id))})]});};export default ViewInvoices;","map":{"version":3,"names":["React","useState","useEffect","axios","jsx","_jsx","jsxs","_jsxs","ViewInvoices","invoices","setInvoices","quotes","setQuotes","clients","setClients","fetchInvoices","invoiceResponse","get","quoteResponse","clientResponse","data","console","log","error","getQuoteName","quoteId","quote","find","q","_id","title","getClientName","clientId","client","c","name","deleteInvoice","id","delete","filter","invoice","editInvoice","window","location","href","children","map","style","marginBottom","amountDue","status","Date","dueDate","toLocaleDateString","onClick"],"sources":["C:/Users/antho/cs203/frontend/src/pages/ViewInvoices.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\n\r\nconst ViewInvoices = () => {\r\n  const [invoices, setInvoices] = useState([]);\r\n  const [quotes, setQuotes] = useState([]);\r\n  const [clients, setClients] = useState([]);\r\n\r\n  useEffect(() => {\r\n    const fetchInvoices = async () => {\r\n      try {\r\n        const invoiceResponse = await axios.get('http://localhost:4000/api/invoices');\r\n        const quoteResponse = await axios.get('http://localhost:4000/api/quotes');\r\n        const clientResponse = await axios.get('http://localhost:4000/api/clients');\r\n        setInvoices(invoiceResponse.data);\r\n        setQuotes(quoteResponse.data);\r\n        setClients(clientResponse.data);\r\n        console.log('Fetched Invoices:', invoiceResponse.data);\r\n        console.log('Fetched Quotes:', quoteResponse.data);\r\n        console.log('Fetched Clients:', clientResponse.data);\r\n      } catch (error) {\r\n        console.error('Error fetching data:', error);\r\n      }\r\n    };\r\n    fetchInvoices();\r\n  }, []);\r\n\r\n  const getQuoteName = (quoteId) => {\r\n    const quote = quotes.find(q => q._id === quoteId);\r\n    return quote ? quote.title : 'Unknown';\r\n  };\r\n\r\n  const getClientName = (clientId) => {\r\n    const client = clients.find(c => c._id === clientId);\r\n    return client ? client.name : 'Unknown';\r\n  };\r\n\r\n  const deleteInvoice = async (id) => {\r\n    try {\r\n      await axios.delete(`http://localhost:4000/api/invoices/${id}`);\r\n      setInvoices(invoices.filter(invoice => invoice._id !== id));\r\n    } catch (error) {\r\n      console.error('Error deleting invoice:', error);\r\n    }\r\n  };\r\n\r\n  const editInvoice = (id) => {\r\n    window.location.href = `/invoices/edit/${id}`;\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <h1>Existing Invoices</h1>\r\n      <ul>\r\n        {invoices.map(invoice => (\r\n          <li key={invoice._id} style={{ marginBottom: '15px' }}>\r\n            <div><strong>Invoice:</strong> {getQuoteName(invoice.quoteId)}</div>\r\n            <div><strong>Client:</strong> {getClientName(invoice.clientId)}</div>\r\n            <div><strong>Amount Due:</strong> {invoice.amountDue}</div>\r\n            <div><strong>Status:</strong> {invoice.status}</div>\r\n            <div><strong>Due Date:</strong> {new Date(invoice.dueDate).toLocaleDateString()}</div>\r\n            <button onClick={() => editInvoice(invoice._id)}>Edit</button>\r\n            <button onClick={() => deleteInvoice(invoice._id)}>Delete</button>\r\n          </li>\r\n        ))}\r\n      </ul>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ViewInvoices;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}