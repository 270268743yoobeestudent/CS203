{"ast":null,"code":"import React,{useState,useEffect}from'react';import axios from'axios';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Invoices=()=>{const[formData,setFormData]=useState({quoteId:'',clientId:'',// Added clientId field\namountDue:'',dueDate:'',status:'Pending'});const[quotes,setQuotes]=useState([]);const[clients,setClients]=useState([]);// State for clients\nuseEffect(()=>{const fetchQuotes=async()=>{try{const response=await axios.get('http://localhost:4000/api/quotes');setQuotes(response.data);}catch(error){console.error('Error fetching quotes:',error);}};fetchQuotes();},[]);useEffect(()=>{const fetchClients=async()=>{try{const response=await axios.get('http://localhost:4000/api/clients');setClients(response.data);}catch(error){console.error('Error fetching clients:',error);}};fetchClients();},[]);const handleChange=e=>{setFormData({...formData,[e.target.name]:e.target.value});};const handleSubmit=async e=>{e.preventDefault();console.log('Form Data:',formData);// Debug print to check data\ntry{const response=await axios.post('http://localhost:4000/api/invoices',formData);alert('Invoice created successfully!');setFormData({quoteId:'',clientId:'',// Reset clientId field\namountDue:'',dueDate:'',status:'Pending'});}catch(error){var _error$response,_error$response$data;console.error('Error creating invoice:',error);// Log the error\nalert('Error: '+(((_error$response=error.response)===null||_error$response===void 0?void 0:(_error$response$data=_error$response.data)===null||_error$response$data===void 0?void 0:_error$response$data.message)||'An error occurred.'));}};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Create Invoice\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"label\",{children:[\"Quote:\",/*#__PURE__*/_jsxs(\"select\",{name:\"quoteId\",value:formData.quoteId,onChange:handleChange,required:true,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select a quote\"}),quotes.map(quote=>/*#__PURE__*/_jsxs(\"option\",{value:quote._id,children:[quote.title,\" (ID: \",quote._id,\")\"]},quote._id))]})]}),/*#__PURE__*/_jsxs(\"label\",{children:[\"Client:\",/*#__PURE__*/_jsxs(\"select\",{name:\"clientId\",value:formData.clientId,onChange:handleChange,required:true,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select a client\"}),clients.map(client=>/*#__PURE__*/_jsx(\"option\",{value:client._id,children:client.name},client._id))]})]}),/*#__PURE__*/_jsxs(\"label\",{children:[\"Amount Due:\",/*#__PURE__*/_jsx(\"input\",{type:\"number\",name:\"amountDue\",value:formData.amountDue,onChange:handleChange,required:true})]}),/*#__PURE__*/_jsxs(\"label\",{children:[\"Due Date:\",/*#__PURE__*/_jsx(\"input\",{type:\"date\",name:\"dueDate\",value:formData.dueDate,onChange:handleChange,required:true})]}),/*#__PURE__*/_jsxs(\"label\",{children:[\"Status:\",/*#__PURE__*/_jsxs(\"select\",{name:\"status\",value:formData.status,onChange:handleChange,children:[/*#__PURE__*/_jsx(\"option\",{value:\"Pending\",children:\"Pending\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Paid\",children:\"Paid\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Overdue\",children:\"Overdue\"})]})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Create Invoice\"})]})]});};export default Invoices;","map":{"version":3,"names":["React","useState","useEffect","axios","jsx","_jsx","jsxs","_jsxs","Invoices","formData","setFormData","quoteId","clientId","amountDue","dueDate","status","quotes","setQuotes","clients","setClients","fetchQuotes","response","get","data","error","console","fetchClients","handleChange","e","target","name","value","handleSubmit","preventDefault","log","post","alert","_error$response","_error$response$data","message","children","onSubmit","onChange","required","map","quote","_id","title","client","type"],"sources":["C:/Users/antho/cs203/frontend/src/pages/CreateInvoice.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\n\r\nconst Invoices = () => {\r\n  const [formData, setFormData] = useState({\r\n    quoteId: '',\r\n    clientId: '',  // Added clientId field\r\n    amountDue: '',\r\n    dueDate: '',\r\n    status: 'Pending',\r\n  });\r\n\r\n  const [quotes, setQuotes] = useState([]);\r\n  const [clients, setClients] = useState([]);  // State for clients\r\n\r\n  useEffect(() => {\r\n    const fetchQuotes = async () => {\r\n      try {\r\n        const response = await axios.get('http://localhost:4000/api/quotes');\r\n        setQuotes(response.data);\r\n      } catch (error) {\r\n        console.error('Error fetching quotes:', error);\r\n      }\r\n    };\r\n\r\n    fetchQuotes();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    const fetchClients = async () => {\r\n      try {\r\n        const response = await axios.get('http://localhost:4000/api/clients');\r\n        setClients(response.data);\r\n      } catch (error) {\r\n        console.error('Error fetching clients:', error);\r\n      }\r\n    };\r\n\r\n    fetchClients();\r\n  }, []);\r\n\r\n  const handleChange = (e) => {\r\n    setFormData({\r\n      ...formData,\r\n      [e.target.name]: e.target.value,\r\n    });\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    console.log('Form Data:', formData);  // Debug print to check data\r\n    try {\r\n      const response = await axios.post('http://localhost:4000/api/invoices', formData);\r\n      alert('Invoice created successfully!');\r\n      setFormData({\r\n        quoteId: '',\r\n        clientId: '',  // Reset clientId field\r\n        amountDue: '',\r\n        dueDate: '',\r\n        status: 'Pending',\r\n      });\r\n    } catch (error) {\r\n      console.error('Error creating invoice:', error);  // Log the error\r\n      alert('Error: ' + (error.response?.data?.message || 'An error occurred.'));\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <h1>Create Invoice</h1>\r\n      <form onSubmit={handleSubmit}>\r\n        <label>Quote:\r\n          <select name=\"quoteId\" value={formData.quoteId} onChange={handleChange} required>\r\n            <option value=\"\">Select a quote</option>\r\n            {quotes.map((quote) => (\r\n              <option key={quote._id} value={quote._id}>\r\n                {quote.title} (ID: {quote._id})\r\n              </option>\r\n            ))}\r\n          </select>\r\n        </label>\r\n        <label>Client:\r\n          <select name=\"clientId\" value={formData.clientId} onChange={handleChange} required>\r\n            <option value=\"\">Select a client</option>\r\n            {clients.map(client => (\r\n              <option key={client._id} value={client._id}>{client.name}</option>\r\n            ))}\r\n          </select>\r\n        </label>\r\n        <label>Amount Due:\r\n          <input type=\"number\" name=\"amountDue\" value={formData.amountDue} onChange={handleChange} required />\r\n        </label>\r\n        <label>Due Date:\r\n          <input type=\"date\" name=\"dueDate\" value={formData.dueDate} onChange={handleChange} required />\r\n        </label>\r\n        <label>Status:\r\n          <select name=\"status\" value={formData.status} onChange={handleChange}>\r\n            <option value=\"Pending\">Pending</option>\r\n            <option value=\"Paid\">Paid</option>\r\n            <option value=\"Overdue\">Overdue</option>\r\n          </select>\r\n        </label>\r\n        <button type=\"submit\">Create Invoice</button>\r\n      </form>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Invoices;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}